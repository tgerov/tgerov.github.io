<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>openvz on /home/gerov</title><link>https://gerov.eu/tags/openvz/</link><description>Recent content in openvz on /home/gerov</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><copyright>Copyright 2022 Tsvetan Gerov | All Content CC-BY-SA</copyright><lastBuildDate>Thu, 18 Mar 2021 17:56:35 +0200</lastBuildDate><atom:link href="https://gerov.eu/tags/openvz/index.xml" rel="self" type="application/rss+xml"/><item><title>How to install Veeam Agent on OpenVZ 7</title><link>https://gerov.eu/posts/openvz7-veeam-agent/</link><pubDate>Thu, 18 Mar 2021 17:56:35 +0200</pubDate><guid>https://gerov.eu/posts/openvz7-veeam-agent/</guid><description>Deploy Veeam Agent 5 on OpenVZ 7</description><content>&lt;h2 id="download-latest-el7-rpms-from-veeam-repositoryhttprepositoryveeamcombackuplinuxagentrpmel7x86_64">Download latest EL7 RPMs from Veeam &lt;a href="http://repository.veeam.com/backup/linux/agent/rpm/el/7/x86_64/">repository&lt;/a>.&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">[&lt;/span>root@openvz7 ~&lt;span style="color:#f92672">]&lt;/span> &lt;span style="color:#75715e"># wget http://repository.veeam.com/backup/linux/agent/rpm/el/7/x86_64/veeam-5.0.0.4318-1.el7.x86_64.rpm&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">[&lt;/span>root@openvz7 ~&lt;span style="color:#f92672">]&lt;/span> &lt;span style="color:#75715e"># wget http://repository.veeam.com/backup/linux/agent/rpm/el/7/x86_64/veeamsnap-5.0.0.4318-1.noarch.rpm&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="install-the-required-dependencies">Install the required dependencies&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">[&lt;/span>root@openvz7 ~&lt;span style="color:#f92672">]&lt;/span> &lt;span style="color:#75715e"># yum install dkms vzkernel-headers-$(uname -r) vzkernel-devel-$(uname -r)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="install-veeamsnap-and-wait-for-the-kernel-module-to-be-compiled">Install VeeamSnap and wait for the kernel module to be compiled&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">[&lt;/span>root@openvz7 ~&lt;span style="color:#f92672">]&lt;/span> &lt;span style="color:#75715e"># rpm -ivh veeamsnap-5.0.0.4318-1.noarch.rpm&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="load-veeamsnap-kernel-module">Load veeamsnap kernel module&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">[&lt;/span>root@openvz7 ~&lt;span style="color:#f92672">]&lt;/span> &lt;span style="color:#75715e"># modprobe veeamsnap&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="you-can-verify-that-the-module-is-lodaded-with-lsmod">You can verify that the module is lodaded with lsmod&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">[&lt;/span>root@openvz7 ~&lt;span style="color:#f92672">]&lt;/span>&lt;span style="color:#75715e"># lsmod | grep veeamsnap&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>veeamsnap &lt;span style="color:#ae81ff">179802&lt;/span> &lt;span style="color:#ae81ff">0&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="install-veeam-agent">Install Veeam Agent&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">[&lt;/span>root@openvz7 ~&lt;span style="color:#f92672">]&lt;/span>&lt;span style="color:#75715e"># rpm -ivh veeam-5.0.0.4318-1.el7.x86_64.rpm&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="verify-that-the-service-is-running">Verify that the service is running&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">[&lt;/span>root@openvz7 ~&lt;span style="color:#f92672">]&lt;/span>&lt;span style="color:#75715e"># systemctl status veeamservice&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>● veeamservice.service - Veeam Agent &lt;span style="color:#66d9ef">for&lt;/span> Linux service daemon
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Loaded: loaded &lt;span style="color:#f92672">(&lt;/span>/usr/lib/systemd/system/veeamservice.service; enabled; vendor preset: disabled&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Active: active &lt;span style="color:#f92672">(&lt;/span>running&lt;span style="color:#f92672">)&lt;/span> since Wed 2021-03-10 07:14:46 EST; 10s ago
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Process: &lt;span style="color:#ae81ff">521861&lt;/span> ExecStart&lt;span style="color:#f92672">=&lt;/span>/usr/sbin/veeamservice --daemonize --pidfile&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">${&lt;/span>PIDFILE&lt;span style="color:#e6db74">}&lt;/span> &lt;span style="color:#f92672">(&lt;/span>code&lt;span style="color:#f92672">=&lt;/span>exited, status&lt;span style="color:#f92672">=&lt;/span>0/SUCCESS&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Main PID: &lt;span style="color:#ae81ff">521904&lt;/span> &lt;span style="color:#f92672">(&lt;/span>veeamservice&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Tasks: &lt;span style="color:#ae81ff">45&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> CGroup: /system.slice/veeamservice.service
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> └─521904 /usr/sbin/veeamservice --pidfile /var/run/veeamservice.pid --daemon
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Now, you can add your OpenVZ server in Veeam Backup and Replication.&lt;/p>
&lt;p>Copyright 2021 Tsvetan Gerov | &lt;!-- raw HTML omitted -->CC BY-SA 2.0&lt;!-- raw HTML omitted -->&lt;/p></content></item></channel></rss>