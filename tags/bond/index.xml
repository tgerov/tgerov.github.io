<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>bond on /home/gerov</title><link>https://gerov.eu/tags/bond/</link><description>Recent content in bond on /home/gerov</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><copyright>Copyright 2022 Tsvetan Gerov | All Content CC-BY-SA</copyright><lastBuildDate>Tue, 13 Dec 2022 16:42:19 +0200</lastBuildDate><atom:link href="https://gerov.eu/tags/bond/index.xml" rel="self" type="application/rss+xml"/><item><title>How to Configure Bridge on Bond With NetworkManager</title><link>https://gerov.eu/posts/2022/how-to-configure-bridge-on-bond-with-networkmanager/</link><pubDate>Tue, 13 Dec 2022 16:42:19 +0200</pubDate><guid>https://gerov.eu/posts/2022/how-to-configure-bridge-on-bond-with-networkmanager/</guid><description>I am using RHEL 8 to create and configure network settings, but the same steps should work on RHEL 9 and Clones.
Network diagram eth0 ---| | --+-- bond0 --+-- br0 eth1 ---| Create bridge nmcli connection add type bridge \ ifname br0 \ ipv4.method manual \ ipv4.addresses 192.168.0.40/24 \ ipv4.gateway 192.168.0.1 \ ipv4.dns &amp;#34;192.168.0.1&amp;#34; \ ipv6.method ignore \ ipv6.never-default true \ bridge.stp no \ con-name br0 I use a static IP address for my bridge.</description><content>&lt;p>I am using RHEL 8 to create and configure network settings, but the same steps should work on RHEL 9 and Clones.&lt;/p>
&lt;h1 id="network-diagram">Network diagram&lt;/h1>
&lt;pre tabindex="0">&lt;code>eth0 ---|
| --+-- bond0 --+-- br0
eth1 ---|
&lt;/code>&lt;/pre>&lt;h1 id="create-bridge">Create bridge&lt;/h1>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>nmcli connection add type bridge &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> ifname br0 &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> ipv4.method manual &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> ipv4.addresses 192.168.0.40/24 &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> ipv4.gateway 192.168.0.1 &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> ipv4.dns &lt;span style="color:#e6db74">&amp;#34;192.168.0.1&amp;#34;&lt;/span> &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> ipv6.method ignore &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> ipv6.never-default true &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> bridge.stp no &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> con-name br0
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>I use a static IP address for my bridge. You will need to adjust the settings to match your needs.&lt;/p>
&lt;h1 id="create-bond">Create bond&lt;/h1>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>nmcli connection add type bond &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> ifname bond0 &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> bond.options &lt;span style="color:#e6db74">&amp;#34;mode=active-backup&amp;#34;&lt;/span> &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> ipv4.method disabled &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> ipv4.never-default true &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> ipv6.method ignore &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> ipv6.never-default true &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> 802-3-ethernet.mtu &lt;span style="color:#ae81ff">1500&lt;/span> &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> con-name bond0 &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> master br0
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="add-slaves-to-bond">Add slaves to bond&lt;/h1>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>nmcli connection add type ethernet ifname eth0 con-name eth0 master bond0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>nmcli connection add type ethernet ifname eth1 con-name eth1 master bond0
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></content></item></channel></rss>